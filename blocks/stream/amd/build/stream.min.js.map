{"version":3,"sources":["../src/stream.js"],"names":["define","$","DataTable","Str","init","self","each","viewDatatble","DataTables","id","container","str","data","pagelenth","args","action","get_strings","key","component","param","M","cfg","sesskey","then","wwwroot","d","newdata","methodname","JSON","stringify","json","parse"],"mappings":"+IAQAA,OAAM,uBAAC,CAAC,QAAD,CACC,8BADD,CAEC,UAFD,CAAD,CAGE,SAASC,CAAT,CAAWC,CAAX,CAAsBC,CAAtB,CAA0B,CAC9B,MAAO,CACNC,IAAI,CAAE,eAAW,CACnB,GAAIC,CAAAA,CAAI,CAAC,IAAT,CACAJ,CAAC,CAAE,YAAF,CAAD,CAAkBK,IAAlB,CAAuB,UAAkB,CACxCC,YAAY,CAAGF,CAAI,CAACG,UAAL,CAAgB,KAAKC,EAArB,CACf,CAFD,CAGK,CANG,CAOJD,UAAU,CAAE,oBAASE,CAAT,CAAmB,IAC/BC,CAAAA,CAAG,CAAGV,CAAC,CAAC,IAAIS,CAAL,CAAD,CAAiBE,IAAjB,CAAsB,UAAtB,CADyB,CAE/BC,CAAS,CAAGZ,CAAC,CAAC,IAAIS,CAAL,CAAD,CAAiBE,IAAjB,CAAsB,YAAtB,CAFmB,CAGnC,GAAGC,CAAS,QAAZ,CAA0B,CACzBA,CAAS,CAAG,EACZ,CACD,GAAIC,CAAAA,CAAI,CAAG,CAACC,MAAM,CAAEJ,CAAT,CAAX,CACA,MAAOR,CAAAA,CAAG,CAACa,WAAJ,CAAgB,CAAC,CACTC,GAAG,CAAEhB,CAAC,CAAC,IAAIS,CAAL,CAAD,CAAiBE,IAAjB,CAAsB,cAAtB,CADI,CAETM,SAAS,CAAE,cAFF,CAGTC,KAAK,CAAEC,CAAC,CAACC,GAAF,CAAMC,OAHJ,CAAD,CAAhB,EAIKC,IAJL,CAIU,UAAY,CAC5BtB,CAAC,CAAC,IAAIS,CAAL,CAAD,CAAiBR,SAAjB,kBACI,QADJ,CAEQ,gBAFR,CAGQ,SAAY,CACJ,SAAY,CACR,KAAQ,GADA,CAER,SAAY,GAFJ,CADR,CAHpB,CASI,WAAcW,CATlB,CAUI,aAVJ,CAWI,aAXJ,CAaI,KAAQ,CACA,KAAQ,MADR,CAEA,SAAY,MAFZ,CAGA,IAAOO,CAAC,CAACC,GAAF,CAAMG,OAAN,CAAgB,gCAAhB,CAAmDJ,CAAC,CAACC,GAAF,CAAMC,OAAzD,CAAiE,iCAHxE,CAIA,KAAQ,cAASG,CAAT,CAAY,CAClBC,OAAO,CAAG,EAAV,CACAA,OAAO,CAACC,UAAR,CAAqB,2BAArB,CACAD,OAAO,CAACZ,IAAR,CAAe,CAACA,IAAI,CAAEc,IAAI,CAACC,SAAL,CAAe,CAACJ,CAAC,CAADA,CAAD,CAAGX,IAAI,CAAJA,CAAH,CAAf,CAAP,CAAf,CACF,MAAOc,CAAAA,IAAI,CAACC,SAAL,CAAe,CAACH,OAAD,CAAf,CACV,CATG,CAUJ,QAAY,iBAAUI,CAAV,CAAgB,CAC1B,GAAIlB,CAAAA,CAAI,CAAGgB,IAAI,CAACG,KAAL,CAAWD,CAAI,CAAC,CAAD,CAAJ,CAAQlB,IAAR,CAAaA,IAAxB,CAAX,CACA,MAAOA,CAAAA,CACR,CAbG,CAbZ,aA4Ba,CACI,OAAU,EADd,CAER,kBAAqB,QAFb,CAGR,SAAY,CACV,KAAQ,qCADE,CAEV,SAAY,oCAFF,CAHJ,CA5Bb,EAqCA,CA1CM,CA2CP,CAzDQ,CA2DV,CA/DK,CAAN","sourcesContent":["/**\n * Streaming video js\n *\n * @module     block_stream/stream\n * @class      stream\n * @package    block_stream\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine(['jquery', \n        'mod_stream/jquery.dataTables',\n        'core/str'], \n        function($,DataTable, Str){\n    return {\n    \tinit: function() {\n\t\t\tvar self=this;\n\t\t\t$( \".dataTable\" ).each(function( index ) {\n\t\t\t\tviewDatatble = self.DataTables(this.id);\n\t\t\t});\n      \t},\n      \tDataTables: function(container){\n\t\t\tvar str = $('#'+container).data('function');\n\t\t\tvar pagelenth = $('#'+container).data('pagelength');\n\t\t\tif(pagelenth == undefined){\n\t\t\t pagelenth = 10;\n\t\t\t}\n\t\t\tvar args = {action: str};\n\t\t\treturn Str.get_strings([{\n                  key: $('#'+container).data('nodatastring'),\n                  component: 'block_stream',\n                  param: M.cfg.sesskey\n          \t}]).then(function(s) {\n\t\t\t\t$('#'+container).DataTable({\n\t\t\t\t    'bInfo' : false,\n\t\t\t\t        'bLengthChange': false,\n\t\t\t\t        'language': {\n\t\t\t\t                'paginate': {\n\t\t\t\t                    'next': '>',\n\t\t\t\t                    'previous': '<'\n\t\t\t\t                }\n\t\t\t\t        },\n\t\t\t\t    'pageLength': pagelenth,\n\t\t\t\t    'processing': true,\n\t\t\t\t    'serverSide': true,\n\t\t\t\t    // \"ajax\": M.cfg.wwwroot + \"/mod/stream/reportfinder.php?action=\"+str +\"&id=\"+id +\"&type=\"+type,\n\t\t\t\t    'ajax': {\n\t\t\t\t            \"type\": \"POST\",\n\t\t\t\t            \"dataType\": \"json\",\n\t\t\t\t            \"url\": M.cfg.wwwroot + '/lib/ajax/service.php?sesskey=' + M.cfg.sesskey+'&info=block_stream_tablecontent',\n\t\t\t\t            \"data\": function(d) {\n\t\t\t\t              newdata = {};\n\t\t\t\t              newdata.methodname = 'block_stream_tablecontent';  \n\t\t\t\t              newdata.args = {args: JSON.stringify({d,args})};\n\t\t\t\t            return JSON.stringify([newdata]);\n\t\t\t\t        },\n\t\t\t\t        \"dataSrc\" : function (json) {\n\t\t\t\t          var data = JSON.parse(json[0].data.data);\n\t\t\t\t          return data;\n\t\t\t\t        }\n\t\t\t\t    },\n\t\t\t\t\t\"language\": {\n                \t    \"search\": '',\n\t\t\t\t\t    \"searchPlaceholder\": 'search',\n\t\t\t\t\t    \"paginate\": {\n\t\t\t\t\t      \"next\": '<i class=\"fa fa-angle-right\"></i>',\n\t\t\t\t\t      \"previous\": '<i class=\"fa fa-angle-left\"></i>' \n\t\t\t\t\t    }\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}, \n    }\n});\n"],"file":"stream.min.js"}