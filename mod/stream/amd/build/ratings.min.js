define ("mod_stream/ratings",["core/ajax","core/str","core/templates","jquery","jqueryui"],function(a,b,c,d){var e=function(a,b){var c=this;if("undefined"==typeof b){b={}}b.max="undefined"==typeof b.max?5:b.max;b.rgbOn="undefined"==typeof b.rgbOn?"#f1c40f":b.rgbOn;b.spaceWidth="undefined"==typeof b.spaceWidth?"1px":b.spaceWidth;b.fontsize="undefined"==typeof b.fontsize?"25px":b.fontsize;b.rgbOff="undefined"==typeof b.rgbOff?"#ecf0f1":b.rgbOff;b.rgbSelection="undefined"==typeof b.rgbSelection?"#ffcf10":b.rgbSelection;b.cursor="undefined"==typeof b.cursor?"pointer":b.cursor;b.indicator="undefined"==typeof b.indicator?"fa fa-star":"fa "+b.indicator;var e="undefined"==typeof d(a).data("stars")?0:d(a).data("stars");d(a).css("cursor",b.cursor);d(a).append(d("<input>",{type:"hidden",name:a.replace("#",""),value:e}));d(a).append(d("<i>",{class:b.indicator,style:"display:none; font-size: "+b.fontsize+"; color: transparent;"}));for(var f=1,g;f<=b.max;f++){g=d("<i>",{class:b.indicator,style:"font-size: "+b.fontsize+"; margin-left: "+b.spaceWidth+"; color:"+(f<=e?b.rgbOn:b.rgbOff)});d(a).append(g)}c.set_target_width(a,b);d(a).append(d("<i>",{class:b.indicator,style:"display:none; font-size: "+b.fontsize+"; color: transparent;"}));d.each(d(a+" > i"),function(f,g){d(g).click(function(){d("[name="+a.replace("#","")+"]").val(f);for(var g=1;g<=b.max;g++){d(d(a+"> i")[g]).css("color",g<=f?b.rgbOn:b.rgbOff)}if(!("undefined"===b.rate)){e=f;c.set_user_ratings(a,f)}});d(g).mouseover(function(){for(var c=1;c<=b.max;c++){d(d(a+" > i")[c]).css("color",c<=f?b.rgbSelection:b.rgbOff)}});d(g).mouseleave(function(){d("[name="+a.replace("#","")+"]").val(f);for(var c=1;c<=b.max;c++){d(d(a+"> i")[c]).css("color",c<=e?b.rgbOn:b.rgbOff)}})})};e.prototype.set_target_width=function(a,b){var c=b.indicator.replace(/\ /g,"."),e=b.spaceWidth,f=d("."+c).width();d(a).width((f+e)*(b.max+1)+"px")};e.prototype.set_user_ratings=function(b,c){var e=d(b).data(),f=a.call([{methodname:"mod_stream_submit_rating",args:{componentid:e.itemid,ratingvalue:c}}]);f[0].done(function(a){self.html(a)})};return{init:function init(a,b){b=JSON.parse(b);return new e(a,b)},updatevalues:function updatevalues(b){var c=a.call([{methodname:"mod_stream_like_dislike",args:b}]);c[0].done(function(a){if(2==b.likestatus){d(".fa-thumbs-down").addClass("active");d(".fa-thumbs-up").removeClass("active")}else{d(".fa-thumbs-up").addClass("active");d(".fa-thumbs-down").removeClass("active")}d(".count_unlikearea_"+b.componentid).html(a.dislike);d(".count_likearea_"+b.componentid).html(a.like);d("#loading_image").hide()})},trigger:function trigger(){d(document).ready(function(){var b=d("#ratingList").html();if(""==b){d("#ratingList").html(" ");var e=d("#ratingList"),f=d("#ratingList").data(),g={};g.itemid=f.itemid;g.ratearea=f.ratearea;g.contextid=1;var h=a.call([{methodname:"mod_stream_ratings_get_ratings_info",args:g}]);h[0].done(function(a){c.render("mod_stream/detailed_info_loaded",a).then(function(a){e.html(a)})})}});d(".overall_users.mt-10").hover(function(){var b=d(this).find(".rating_tooltip").html();if(""==b){d(this).find(".rating_tooltip").html(" ");var e=d(this).find(".rating_tooltip"),f=d(this).find(".rating_tooltip").data(),g={};g.itemid=f.itemid;g.ratearea=f.ratearea;g.contextid=1;var h=a.call([{methodname:"mod_stream_ratings_get_ratings_info",args:g}]);h[0].done(function(a){c.render("mod_stream/detailed_info",a).then(function(a){e.html(a)})})}})},load:function load(){}}});
//# sourceMappingURL=ratings.min.js.map
