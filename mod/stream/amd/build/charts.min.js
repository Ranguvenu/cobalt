define ("mod_stream/charts",["jquery","media_videojs/video-lazy","mod_stream/jquery.dataTables","mod_stream/flatpickr","mod_stream/radioslider","core/modal_factory","core/modal_events","core/fragment","core/templates","core/ajax","core/str"],function(a,b,c,d,e,f,g,h,i,j,k){return{LineChart:function LineChart(a,b){if(!document.getElementById(a)){return!1}Highcharts.chart(a,{title:{text:""},xAxis:{categories:b[0]},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:b[1]})},SparklineChart:function SparklineChart(a,b){if(!document.getElementById(a)){return!1}Highcharts.chart(a,{chart:{type:"column",width:300,height:75},title:{text:""},xAxis:{categories:b[0][0].datesinfo},credits:{enabled:!1},legend:{enabled:!1},yAxis:{visible:!1},plotOptions:{column:{dataLabels:{enabled:!1},legend:{enabled:!1},enableMouseTracking:!1}},series:b[0],exporting:{enabled:!1}})},ReportsCharts:function ReportsCharts(){var b=JSON.parse(stream_reports_data.completedvideosbyusers),c=JSON.parse(stream_reports_data.completedusersbyvideos),d=JSON.parse(stream_reports_data.toplikes),e=JSON.parse(stream_reports_data.topratings),f=JSON.parse(stream_reports_data.topviews),g=JSON.parse(stream_reports_data.weekvideos),h=JSON.parse(stream_reports_data.weekminutes),l=JSON.parse(stream_reports_data.weekviews),m=JSON.parse(stream_reports_data.weeklikesdislikes),n=JSON.parse(stream_reports_data.weekratings);this.LineChart("toplikes",d);this.LineChart("topratings",e);this.LineChart("topviews",f);this.SparklineChart("activevideos",g);this.SparklineChart("streamedvideos",h);this.SparklineChart("totalviews",l);this.SparklineChart("likesdislikes",m);this.SparklineChart("ratings",n);var o=a("#container2");if(o.length){return k.get_strings([{key:"noofusers",component:"stream"}]).then(function(a){Highcharts.chart("container2",{title:{text:""},xAxis:{categories:c[0],labels:{rotation:-45,style:{fontSize:"13px"}}},yAxis:{min:0,title:{text:a[0]}},legend:{enabled:!0},series:c[1]})})}a(document).on("graphsReload","#segmented-button",function(){var b=a("#segmented-button").data("timestamps"),c=a("#segmented-button").data("course"),d=a("#segmented-button").data("action"),e=a("#segmented-button").data("moduleid");if(e==void 0){e=""}var f={timestamps:b};if("reportsHeader"==d){f.courseid=c}else{f.moduleid=c}var g=j.call([{methodname:"mod_stream_"+d,args:f}]);g[0].done(function(b){var b=JSON.parse(b);i.render("mod_stream/reportsHeading",b).then(function(b){a("#reportsHeader").html(b)})})});a(".timeperiod").change(function(){var b=a(this).val(),c=a(this).data("courseid"),d=j.call([{methodname:"stream_timeperiod",args:{timeperiod:b,courseid:c}}]);d[0].done(function(b){var c=JSON.parse(b.timeperiod),d="";a.each(c,function(a,b){d+="<tr><td>"+b.fullname+"</td><td>"+b.completedvideos+"</td></tr>"});a(".timeperioddata").html(d)}).fail(function(a){console.log(a)})});var p=a("#container3");if(p.length){var c=JSON.parse(stream_reports_data.dailyvisits);return k.get_strings([{key:"dailyhitsviews",component:"stream"},{key:"hitsviews",component:"stream"}]).then(function(a){Highcharts.chart("container3",{chart:{type:"line"},title:{text:a[0]},xAxis:{type:"category",labels:{rotation:-45,style:{fontSize:"13px"}}},exporting:{showTable:!1,csv:{}},yAxis:{min:0,title:{text:a[1]}},legend:{enabled:!1},series:[{name:a[1],data:c,dataLabels:{enabled:!0,rotation:-90,color:"#FFFFFF",align:"right",format:"{point.y}",y:10,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}}]})})}}}});
//# sourceMappingURL=charts.min.js.map
