/**
 * Streaming video js
 *
 * @module     mod_stream/stream
 * @class      stream
 * @package    mod_stream
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_stream/player",["jquery","core/str","media_videojs/video-lazy","core/ajax","mod_stream/videojs-playbackrate-adjuster","mod_stream/videojs-contrib-quality-levels","mod_stream/videojs-hls-quality-selector"],(function($,Str,videojs,Ajax){return{load:function(args){var values=JSON.parse(args);const player=videojs(values.identifier);var myVideoPlayer=document.getElementById("mod_stream_form_video");player.src({src:values.src,type:"application/x-mpegURL"}),player.hlsQualitySelector({displayCurrentQuality:!0}),void 0!==myVideoPlayer&&null!=myVideoPlayer&&(myVideoPlayer.onloadedmetadata=function(){console.log("metadata loaded!"),console.log(this.duration)},myVideoPlayer.addEventListener("loadedmetadata",(function(){console.log(myVideoPlayer.duration),$("#stream_duration").val(myVideoPlayer.duration.toFixed(0))}))),player.on("pause",(function(){var currenttime=player.currentTime(),lengthOfVideo=player.duration();Ajax.call([{methodname:"mod_streamattempts",args:{moduleid:values.cm,courseid:values.course,duration:lengthOfVideo,currenttime:currenttime,event:"pause"}}])[0].done((function(response){console.log(Str.get_string("Pauselog","block_stream"))})).fail((function(ex){console.log(Str.get_string("notupdated","block_stream")+JSON.stringify(ex))}))}))}}}));

//# sourceMappingURL=player.min.js.map